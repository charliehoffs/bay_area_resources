---
title: "Bay Area Resource Fliers" 
author: "Chris LeBoa" 
date: "`r Sys.Date()`"
output: 
  github_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r message=FALSE, warning=FALSE}
# Libraries
library(tidyverse)
library(googlesheets4)
library(tidyr)

# Parameters
sheet_link <- "https://docs.google.com/spreadsheets/d/11tdkyX0kR8nRwMUktohdp2Wx1fGiMiHrlUP4i_8ctPM/edit?usp=sharing"
#===============================================================================

# Code
```

## Read in sheet

```{r}
# col_types = cols(.default = "c")

resources <- 
  read_sheet(sheet_link, sheet = 2, col_types = "c") %>% 
  rename_all(str_to_lower) %>% 
  drop_na(organization) %>% 
  rename_all(~str_remove_all(.,"\\,|\\/")) %>% 
  rename_all(~str_replace_all(.,"\\ ","_")) %>% 
  mutate(
    location = str_replace_all(location, "\n", " "),
    days_hours = str_replace_all(days_hours, "\n", " ")
  ) %>% 
  select(-1, -c("open_time", "close_time", "date_verified"))

#set to volunteer facing document right now

resources

#set to volunteer facing document right now


```

### Parse by County

```{r}

santa_clara <- 
  resources %>% 
  filter(county == "Santa Clara")

```


## Write to Google Sheet

```{r}

# This commented line finds the ID for our volunteer spreadsheet
# as_sheets_id("https://docs.google.com/spreadsheets/d/11tdkyX0kR8nRwMUktohdp2Wx1fGiMiHrlUP4i_8ctPM/edit#gid=0")

volunteer_sheet_id <- "11tdkyX0kR8nRwMUktohdp2Wx1fGiMiHrlUP4i_8ctPM"

# This commented line gives more info on the spreadsheet
# sheets_sheet_properties(volunteer_sheet_id)

# Write sheet to a new tab (must first create in the spreadsheet)
# This is for the filtered Santa Clara sheet
write_sheet(santa_clara, volunteer_sheet_id, sheet = 5)

```

